<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: content: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
    <script src="components/loader.js"></script>
    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="css/style.css">
    <script>
        var color="#ffffe0";
        var pallet;        
        function toClear(){
            pallet.value = "#ffffe0"
            }        
    window.onload = function(){
        var sx, sy, ex, ey;
        var canvas = document.getElementById('myCanvas');
        if (canvas.getContext){
            var context = canvas.getContext('2d');        
        pallet = document.querySelector("#pallet");//パレット取得
        strokeSize = document.getElementById('haba');//幅取得
            document.addEventListener('touchstart',onTouchStart,false);//タッチ開始
            function onTouchStart(event){
                var w = document.getElementById('width').value; //幅
                context.lineWidth = w; //変更
                context.strokeStyle = pallet.value;
                context.strokeWeight =strokeSize;
                context.lineCap = "round";
                var touch = event.changedTouches[0];
                sx = touch.pageX;
                sy = touch.pageY;
            }            
            document.addEventListener("touchmove",onTouchMove,false);//タッチムーブ中
            function onTouchMove(event){
                var touch = event.changedTouches[0];
                ex = touch.pageX;
                ey = touch.pageY;
                context.textAlign=center;
                context.beginPath();
                context.moveTo(sx,sy);
                context.lineTo(ex,ey);
                context.stroke();
                sx=ex;
                sy=ey;
            }
        }
    }
    </script>
</head>

<body>
    <br />
    <canvas id="myCanvas" height=460px 
        style = "background-color:#ffffe0"></canvas>
    <br />
    <label>&emsp;色<input id="pallet" type="color" 
        value="#ffffe0"></label>
    <label>&emsp;細<input id="width" type="range" 
        min="1" max="30" size="2x">太</label>
    <br />
    <label>&emsp;&emsp;<input id="cl" type="button" 
    value="消しゴム" onClick="toClear()"/></label>
</body>

</html>
